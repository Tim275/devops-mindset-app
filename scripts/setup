#!/bin/bash
set -e

echo "ðŸš€ Entwicklungsumgebung wird eingerichtet..."

# mise.toml vertrauen und Tools installieren
/usr/local/bin/mise trust /workspaces/"$DEVPOD_WORKSPACE_ID"/mise.toml
/usr/local/bin/mise install

# mise in aktuelle Shell aktivieren
eval "$(/usr/local/bin/mise activate bash)"

# Python Dependencies installieren
echo "ðŸ“¦ Installiere Python Dependencies..."
pip install fastapi uvicorn pydantic

echo "âœ… Setup abgeschlossen!"
/usr/local/bin/mise list

echo "ðŸŽ‰ Die Entwicklungsumgebung ist bereit!"
echo "ðŸ§  Befehle zum Entwickeln:"
echo "  â€¢ python -m src.backend.main        - FastAPI API starten"
echo "  â€¢ curl http://localhost:22112/health - API testen"
echo "  â€¢ open http://localhost:22112/docs   - Swagger UI Ã¶ffnen"
echo "  â€¢ git add . && cz commit            - Ã„nderungen committen"
echo "  â€¢ pre-commit run --all-files        - Code-QualitÃ¤t prÃ¼fen"
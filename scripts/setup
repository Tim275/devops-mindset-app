#!/bin/bash
set -e

echo "Entwicklungsumgebung wird eingerichtet..."
WORKSPACE_PATH=${DEVPOD_WORKSPACE_ID:+/workspaces/"$DEVPOD_WORKSPACE_ID"}
WORKSPACE_PATH=${WORKSPACE_PATH:-$(pwd)}

# Git-Setup ausführen
chmod +x ./scripts/setup_git
./scripts/setup_git

# mise.toml vertrauen und Tools installieren
echo "Vertraue mise.toml in $WORKSPACE_PATH"
mise trust "$WORKSPACE_PATH/mise.toml" 2>/dev/null || true

echo "Installiere Tools mit mise..."
mise install

echo "Setup abgeschlossen!"
mise list

# mise für aktuelle Shell aktivieren
eval "$(mise activate bash)"
{% extends "base.html" %}

{% block content %}
<h1>ğŸš€ DevOps Study Tracker</h1>

<!-- Add New Session Form -->
<form action="{{ url_for('add_session') }}" method="POST">
    <div class="form-group">
        <label for="minutes">Study Time (minutes):</label>
        <input type="number" id="minutes" name="minutes" min="1" required>
    </div>
    
    <div class="form-group">
        <label for="tag">What did you study?</label>
        <input type="text" id="tag" name="tag" placeholder="e.g., Kubernetes, Docker, AWS..." required>
    </div>
    
    <button type="submit">Add Study Session</button>
</form>

<!-- Total Study Time -->
{% if sessions %}
<div class="total-time">
    Total Study Time: {{ sessions | sum(attribute='minutes') }} minutes 
    ({{ "%.1f" | format((sessions | sum(attribute='minutes')) / 60) }} hours)
</div>
{% endif %}

<!-- Study Sessions List -->
<h2>ğŸ“š Your Study Sessions</h2>

{% if sessions %}
    {% for session in sessions | reverse %}
    <div class="session">
        <strong>{{ session.minutes }} minutes</strong> - {{ session.tag }}
        
        <form action="{{ url_for('delete_session', session_id=session.id) }}" method="POST" style="display: inline;">
            <button type="submit" class="delete-btn" onclick="return confirm('Delete this session?')">
                Delete
            </button>
        </form>
        
        <div class="session-meta">
            ğŸ“… {{ session.date[:19] if session.date else 'Unknown date' }}
        </div>
    </div>
    {% endfor %}
{% else %}
    <p>No study sessions yet. Add your first session above! ğŸ¯</p>
{% endif %}

{% endblock %}